(()=>{"use strict";var n={365:(n,t,e)=>{e.d(t,{A:()=>s});var r=e(601),a=e.n(r),i=e(314),o=e.n(i)()(a());o.push([n.id,':root {\n  --bg-start: #0f0b1a;\n  --bg-end: #1b1030;\n  --text: #eae6f2;\n  --muted: #b9a7d9;\n  --accent: #9b5cff;\n  --accent-2: #ff6ec7;\n  --panel: #1a1230;\n  --panel-border: #3a1c6b;\n  --shadow: rgba(0, 0, 0, 0.35);\n}\n\nhtml { background-color: transparent; }\n\nbody {\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  min-height: 100vh;\n  flex-direction: column;\n  margin: 0;\n  background: linear-gradient(140deg, var(--bg-start), var(--bg-end));\n  color: var(--text);\n  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";\n}\n\n/* Utility */\n.is-hidden { display: none !important; }\n\n/* Optional legacy containers kept for compatibility */\n#grid-container, .img-canvas { display: none; }\n\nbutton {\n  border: 1px solid color-mix(in oklab, var(--accent) 60%, white 0%);\n  background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 40%, black 15%), color-mix(in oklab, var(--accent) 25%, black 25%));\n  color: #fff;\n  padding: 10px 14px; /* smaller */\n  font-size: 14px;    /* smaller */\n  font-weight: 700;\n  min-width: 120px;   /* smaller */\n  border-radius: 10px;\n  margin: 6px;\n  position: relative;\n  box-shadow: 0 8px 20px var(--shadow);\n  transition: transform .15s ease, box-shadow .2s ease, background .2s ease;\n  cursor: pointer;\n}\nbutton:hover { transform: translateY(-1px); box-shadow: 0 10px 26px var(--shadow); }\nbutton:active { transform: translateY(1px); box-shadow: 0 6px 14px var(--shadow); }\nbutton:focus-visible { outline: 2px solid var(--accent-2); outline-offset: 2px; }\n\ncanvas {\n  border-radius: 12px;\n  background: #0c0c12; /* dark so white strokes are visible */\n  /* subtle light edge + soft light glow to emphasize boundary */\n  box-shadow: 0 0 0 2px rgba(255,255,255,0.06), 0 4px 14px rgba(255,255,255,0.08), 0 16px 40px var(--shadow);\n  border: 1px solid rgba(255,255,255,0.10);\n}\n\n/* Pixel preview colors (naming kept to match existing JS) */\n.black { background-color: #fff; }\n.white { background-color: transparent; }\n\n/* Main layout */\n.parent {\n  display: grid;\n  grid-template-columns: 1.25fr 0.9fr 0.9fr 0.9fr; /* densified columns without empty spacer */\n  grid-template-rows: auto auto 1fr;\n  gap: 12px; /* tighter gap */\n  width: min(1200px, 92vw);\n  padding: 24px 16px 48px;\n}\n\n#drawingCanvas { grid-area: 1 / 1 / 3 / 3; } /* Canvas keeps spanning first two cols */\n\n/* Combined preview container */\n#resultPreview {\n  grid-area: 1 / 2 / 3 / 3; /* spans two rows to hold digit + label */\n  display: grid;\n  grid-template-rows: auto auto;\n  gap: 8px;\n  align-content: start;\n  background: color-mix(in oklab, var(--panel) 92%, black 0%);\n  border: 1px solid var(--panel-border);\n  border-radius: 12px;\n  box-shadow: 0 16px 40px var(--shadow);\n  padding: 12px;\n  align-self: start;\n  z-index: 1;\n  width: max-content;        /* shrink-wrap to digit + label */\n  justify-self: start;       /* do not stretch to full column */\n  justify-items: start;      /* align inner content to left */\n}\n\n#resultPreview #digitResult {\n  width: 160px;\n  height: 160px;\n  display: grid;\n  grid-template-columns: repeat(20, 1fr);\n  grid-template-rows: repeat(20, 1fr);\n}\n\n#resultPreview #predictionLabel {\n  color: var(--muted);\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n\n/* Remove old grid positions to avoid conflicts */\n#digitResult { grid-area: auto; }\n#predictionLabel { grid-area: auto; }\n\n/* Canvas wrapper and hint */\n.canvas-wrap { position: relative; width: max-content; }\n.canvas-hint {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--muted);\n  background: rgba(0,0,0,0.2);\n  border-radius: 12px;\n  text-align: center;\n  padding: 12px;\n  pointer-events: none;\n  transition: opacity .25s ease;\n}\n.canvas-hint.is-hidden { opacity: 0; }\n\n/* Keep chart in place; allow internal growth */\n#predictionList { position: relative; }\n#predictionList canvas#chart { display: block; width: 100%; height: auto; }\n\n#predictions { display: none; }\n.prediction { font-size: 18px; font-weight: 600; color: var(--accent-2); text-align: center; }\n\n/* Reveal animations: keep simple opacity so charts don\'t slide */\n#digitResult:not(.is-hidden),\n#predictionLabel:not(.is-hidden) { animation: fadeInOpacity .2s ease-out; }\n@keyframes fadeInOpacity { from { opacity: 0;} to { opacity: 1;} }\n\n/* === 3 cols x 2 rows layout (overrides) === */\n.parent {\n  grid-template-columns: 1.3fr 1fr 1fr; /* 3 columns */\n  grid-template-rows: auto auto;       /* 2 rows */\n}\n\n/* Grid items (use direct children of .parent) */\n.parent > .canvas-wrap { grid-area: 1 / 1 / 2 / 2; }\n.parent > .buttons     { grid-area: 2 / 1 / 3 / 2; }\n#resultPreview         { grid-area: 1 / 2 / 2 / 3; }\n#predictionList        { grid-area: 1 / 3 / 2 / 4; height: 280px; min-height: 280px; }\n\n/* Keep buttons compact in their single cell */\n.parent > .buttons {\n  grid-template-columns: repeat(2, minmax(120px, auto));\n  justify-content: start;\n  align-items: start;\n}\n\n/* Mobile: stack vertically in this order: canvas, buttons, preview, chart */\n@media (max-width: 900px) {\n  .parent {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: auto auto auto auto;\n    grid-template-areas:\n      "canvas"\n      "buttons"\n      "preview"\n      "chart";\n  }\n  .parent > .canvas-wrap { grid-area: canvas; }\n  .parent > .buttons     { grid-area: buttons; }\n  #resultPreview         { grid-area: preview; min-height: 180px; width: fit-content; margin: 8px auto; z-index: 2; }\n  #predictionList        { grid-area: chart; width: 100%; }\n}\n@media (max-width: 520px) {\n  .parent > .buttons { grid-template-columns: 1fr; }\n  #predictionList    { height: 200px; min-height: 200px; }\n}\n\n/* === Layout tweaks: narrower preview column, centered full-width buttons, smaller mobile charts === */\n.parent { grid-template-columns: 1.3fr 0.8fr 1fr; }\n\n.parent > .buttons {\n  grid-template-columns: 1fr 1fr; /* two equal columns */\n  justify-content: stretch;       /* center via stretching */\n  justify-items: stretch;\n  align-items: stretch;\n}\n.parent > .buttons button { width: 100%; margin: 0; }\n\n@media (max-width: 900px) {\n  #predictionList { height: 200px; min-height: 200px; }\n}\n@media (max-width: 520px) {\n  #predictionList { height: 180px; min-height: 180px; }\n}\n\n/* === Buttons layout: two buttons at 40% each with more spacing === */\n.parent > .buttons {\n  display: flex;\n  justify-content: center; /* center the pair */\n  align-items: stretch;\n  gap: 16px; /* add space between buttons */\n}\n.parent > .buttons button {\n  flex: 0 0 40%;\n  max-width: 40%;\n  width: 40%;\n  margin: 0; /* spacing handled by gap */\n}\n\n/* Responsive: allow wrapping and adjust widths */\n@media (max-width: 900px) {\n  .parent > .buttons {\n    display: flex !important;\n    flex-wrap: wrap;\n    justify-content: center; /* center group */\n    align-items: center;\n    gap: 12px;\n    min-height: 56px; /* ensure row has height */\n    padding: 8px 0;\n    z-index: 2; /* stay above adjacent panels if overlapping */\n  }\n  .parent > .buttons button {\n    flex: 1 1 48%;\n    max-width: 48%;\n    width: auto;\n  }\n}\n@media (max-width: 520px) {\n  .parent > .buttons {\n    justify-content: stretch;\n  }\n  .parent > .buttons button {\n    flex: 1 1 100%;\n    max-width: 100%;\n  }\n}\n\n/* === Center contents in their grid cells === */\n.parent > * { justify-self: center; align-self: center; }\n.parent > .canvas-wrap { justify-self: center; align-self: center; }\n\n/* Add horizontal outer margin to charts */\n#predictionList { margin-inline: 16px; }\n\n/* Keep mobile stacking unaffected */\n@media (max-width: 900px) {\n  #predictionList { margin-inline: 12px; }\n}\n\n/* === Chart container constraints & wrapping fixes === */\n#predictionList {\n  /* override global centering to avoid shrink-to-content loops */\n  justify-self: start;\n  align-self: start;\n  /* do not let content force grid track expansion */\n  min-width: 0;\n  /* fill available space but never exceed a sane max on desktop */\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  /* inner breathing room so chart doesn\'t touch cell edge */\n  padding-right: 12px;\n  /* avoid clipping: allow scrollbars if content temporarily overflows */\n  overflow: auto;\n}\n\n@media (max-width: 900px) {\n  #predictionList { padding-right: 10px; }\n}\n\n/* ensure chart canvas never exceeds container */\n#predictionList canvas#chart {\n  max-width: 100%;\n  height: 100%; /* match container height (set above via existing rules) */\n}\n\n/* prevent other grid children from forcing track growth */\n.parent > .buttons,\n#resultPreview {\n  min-width: 0;\n  max-width: 100%;\n}\n\n/* help long labels wrap instead of overflow */\n#predictionLabel { \n  overflow-wrap: anywhere; \n  word-break: break-word; \n}',""]);const s=o},314:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e="",r=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),r&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),r&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(n,e,r,a,i){"string"==typeof n&&(n=[[null,n,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(o[d]=!0)}for(var c=0;c<n.length;c++){var l=[].concat(n[c]);r&&o[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},601:n=>{n.exports=function(n){return n[1]}},72:n=>{var t=[];function e(n){for(var e=-1,r=0;r<t.length;r++)if(t[r].identifier===n){e=r;break}return e}function r(n,r){for(var i={},o=[],s=0;s<n.length;s++){var d=n[s],c=r.base?d[0]+r.base:d[0],l=i[c]||0,p="".concat(c," ").concat(l);i[c]=l+1;var u=e(p),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var g=a(m,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:g,references:1})}o.push(p)}return o}function a(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,a){var i=r(n=n||[],a=a||{});return function(n){n=n||[];for(var o=0;o<i.length;o++){var s=e(i[o]);t[s].references--}for(var d=r(n,a),c=0;c<i.length;c++){var l=e(i[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=d}}},659:n=>{var t={};n.exports=function(n,e){var r=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},540:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},56:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var a=void 0!==e.layer;a&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,a&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var i=e.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}},113:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},t={};function e(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return n[r](i,i.exports,e),i.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.nc=void 0;var r=e(72),a=e.n(r),i=e(825),o=e.n(i),s=e(659),d=e.n(s),c=e(56),l=e.n(c),p=e(540),u=e.n(p),m=e(113),g=e.n(m),h=e(365),f={};f.styleTagTransform=g(),f.setAttributes=l(),f.insert=d().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=u(),a()(h.A,f),h.A&&h.A.locals&&h.A.locals;let v=null;let x=!1,b=0,w=0;!async function(){let n;try{n=await async function(){const n=await tf.loadLayersModel("./models/model.json");return console.log("Model loaded successfully"),n}(),function(){const t=document.getElementById("drawingCanvas"),e=t.getContext("2d"),r=document.getElementById("canvasHint");e.fillStyle="white",e.lineCap="round",e.lineJoin="round";const a=(n,e)=>{x=!0,[b,w]=[n,e],t.style.cursor="crosshair",r?.classList.add("is-hidden")},i=(n,t)=>{x&&(e.beginPath(),e.moveTo(b,w),e.lineTo(n,t),e.lineWidth=30,e.strokeStyle="white",e.stroke(),[b,w]=[n,t])};t.addEventListener("mousedown",(n=>a(n.offsetX,n.offsetY))),t.addEventListener("mousemove",(n=>i(n.offsetX,n.offsetY))),t.addEventListener("mouseup",(()=>{x=!1,t.style.cursor="default"})),t.addEventListener("mouseout",(()=>{x=!1,t.style.cursor="default"})),t.addEventListener("touchstart",(n=>{const e=n.touches[0],r=t.getBoundingClientRect();a(e.clientX-r.left,e.clientY-r.top)})),t.addEventListener("touchmove",(n=>{if(!x)return;const e=n.touches[0],r=t.getBoundingClientRect();i(e.clientX-r.left,e.clientY-r.top),n.preventDefault()})),t.addEventListener("touchend",(()=>{x=!1,t.style.cursor="default"})),t.addEventListener("touchcancel",(()=>{x=!1,t.style.cursor="default"})),document.getElementById("predictButton").addEventListener("click",(async()=>{const t=document.getElementById("resultPreview"),e=document.getElementById("predictionList");t?.classList.remove("is-hidden"),e?.classList.remove("is-hidden"),await new Promise(requestAnimationFrame);const r=function(){const n=document.getElementById("drawingCanvas"),t=n.getContext("2d").getImageData(0,0,n.width,n.height).data,e=20,r=n.width/e,a=n.height/e;let i=Array.from({length:e},(()=>Array(e).fill(0)));for(let o=0;o<e;o++)for(let s=0;s<e;s++){const e=Math.floor(s*r),d=Math.floor(o*a),c=Math.floor((s+1)*r),l=Math.floor((o+1)*a);let p=0,u=0;for(let r=d;r<l;r++)for(let a=e;a<c;a++){const e=4*(r*n.width+a);p+=(t[e]+t[e+1]+t[e+2])/3,u++}const m=p/u>=128?1:0;i[o][s]=m}const o=Array.from({length:e},((n,t)=>i.map((n=>n[t])))).flat();return tf.tensor2d(o,[1,400])}();await async function(n,t){if(!(n instanceof tf.Tensor))throw new Error("imageData must be a Tensor");const e=t.predict(n),r=await e.array(),a=e.argMax(-1).dataSync()[0];return function(n,t){const e=document.getElementById("resultPreview");e?.classList.remove("is-hidden"),document.getElementById("predictionLabel").innerHTML=`Predicted digit: ${t}<br>with ${(100*n[0][t]).toFixed(2)}% of certainty`;const r=document.getElementById("chart").getContext("2d");v&&v.destroy(),v=new Chart(r,{type:"bar",data:{labels:Array.from({length:10},((n,t)=>t)),datasets:[{label:"Predictions",data:n[0].map((n=>100*n)),backgroundColor:"rgba(0, 0, 255, 0.2)",borderColor:"rgba(0, 0, 255, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:500},scales:{x:{ticks:{font:{size:16},color:"white"}},y:{beginAtZero:!0,ticks:{font:{size:16},color:"white"}}},plugins:{legend:{labels:{font:{size:16},color:"white"}}}}})}(r,a),function(n){const t=n.reshape([20,20]).arraySync(),e=t[0].map(((n,e)=>t.map((n=>n[e]))));let r=document.getElementById("digitResult");r.innerHTML="";for(const n of e)for(const t of n){const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.className=t>.5?"black":"white",r.appendChild(n)}}(n),a}(r,n)}))}(),document.getElementById("clearButton").addEventListener("click",(()=>{!function(){const n=document.getElementById("drawingCanvas");n.getContext("2d").clearRect(0,0,n.width,n.height);const t=document.getElementById("canvasHint");t?.classList.remove("is-hidden")}();const n=document.getElementById("resultPreview"),t=document.getElementById("digitResult"),e=document.getElementById("predictionLabel"),r=document.getElementById("predictionList");t&&(t.innerHTML=""),e&&(e.innerHTML=""),n?.classList.add("is-hidden"),r?.classList.add("is-hidden"),v&&(v.destroy(),v=null)}))}catch(n){console.error("Error during training or prediction:",n)}}()})();